{
  "schemes" : [ "https" ],
  "tags" : [ {
    "name" : "Audit events"
  }, {
    "name" : "Campaigns"
  }, {
    "name" : "Ingest"
  }, {
    "name" : "Segments"
  }, {
    "name" : "Workflow"
  } ],
  "definitions" : {
    "AuditEvent" : {
      "description" : "An audit event",
      "example" : {
        "tenant" : "acme-sb",
        "principal_name" : "bob smith",
        "object_id" : "seg-35GMWpn6Y",
        "happened_at" : "2024-04-09T17:21:06.747Z",
        "tenant_family" : "acme",
        "object_name" : "demo segment",
        "principal_email" : "example@amperity.com",
        "principal_id" : "google-apps|amperity@amperity.com",
        "origin_ip" : "127.0.0.1",
        "event_id" : "ae-21HCWon6Y",
        "event_type" : ":amperity.plugin.credential/updated"
      },
      "type" : "object",
      "properties" : {
        "tenant" : {
          "description" : "The unique identifier for the tenant.",
          "x-example" : "acme-sb",
          "type" : "string"
        },
        "principal_name" : {
          "description" : "The friendly name of the user associated with the activity, if available, otherwise the email address or API key.",
          "type" : "string"
        },
        "object_id" : {
          "description" : "The identifier for the object against which the action occurred.",
          "type" : "string"
        },
        "happened_at" : {
          "description" : "The date and time at which the action occurred. Dates and times are in ISO-8601 format and in UTC.",
          "type" : "string",
          "format" : "date-time"
        },
        "tenant_family" : {
          "description" : "The unique identifier for the tenant family",
          "x-example" : "acme",
          "type" : "string"
        },
        "object_name" : {
          "description" : "A composed string that describes the object(s) for which the action occurred.",
          "type" : "string"
        },
        "principal_email" : {
          "description" : "The email address for the user who initiated the action.",
          "type" : "string"
        },
        "principal_id" : {
          "description" : "The identifier for the user who initiated the action. This user may be an API key or a non-human user.",
          "type" : "string"
        },
        "origin_ip" : {
          "description" : "The IP address that is associated with the user who initiated the action.",
          "type" : "string"
        },
        "event_id" : {
          "description" : "The unique identifier for the event.",
          "type" : "string"
        },
        "event_type" : {
          "description" : "The type of event.",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "tenant", "principal_name", "object_id", "happened_at", "tenant_family", "object_name", "principal_email", "principal_id", "origin_ip", "event_id", "event_type" ]
    },
    "AuditEventListEnvelope" : {
      "description" : "Paginated list of AuditEvents",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "AuditEvent items on this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/AuditEvent"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    },
    "Campaign" : {
      "description" : "A campaign",
      "example" : {
        "id" : "cc-21HCWon6Y",
        "name" : "Holiday Campaign"
      },
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "Campaign id",
          "type" : "string"
        },
        "name" : {
          "description" : "Campaign name",
          "type" : "string"
        },
        "deliver_at" : {
          "description" : "The instant this campaign should be delivered",
          "type" : "string",
          "format" : "date-time"
        }
      },
      "additionalProperties" : false,
      "required" : [ "id", "name" ]
    },
    "CampaignListEnvelope" : {
      "description" : "Paginated list of Campaigns",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "Campaign items on this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Campaign"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    },
    "ErrorResponse" : {
      "description" : "An unexpected error response",
      "example" : {
        "status" : 400,
        "message" : "An unexpected error occurred."
      },
      "type" : "object",
      "properties" : {
        "status" : {
          "description" : "The status code of the response",
          "type" : "integer",
          "format" : "int64"
        },
        "message" : {
          "description" : "Description of the error",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "status", "message" ]
    },
    "IngestFeedDetails" : {
      "description" : "Details on an ingest job for a single feed",
      "example" : {
        "errors" : 200,
        "feed_id" : "df-5L6d1veh",
        "read" : 1000,
        "rejected" : 200,
        "updated" : 200,
        "started_at" : "2024-06-01T04:02:54.433Z",
        "state" : "succeeded",
        "ended_at" : "2024-06-01T04:02:57.433Z",
        "files" : [ {
          "file_id" : "cb-20240618-71992-SF3Uz/part0.avro",
          "name" : "part0.avro",
          "read" : 1000,
          "errors" : 200
        } ],
        "inserted" : 400,
        "table_name" : "My table",
        "job_id" : "isj-1f73r9u2"
      },
      "type" : "object",
      "properties" : {
        "errors" : {
          "description" : "The number of rows with an ingest error.",
          "type" : "integer",
          "format" : "int64"
        },
        "feed_id" : {
          "description" : "The unique ID of this feed.",
          "type" : "string"
        },
        "read" : {
          "description" : "The number of rows ingested into this feed.",
          "type" : "integer",
          "format" : "int64"
        },
        "rejected" : {
          "description" : "The number of duplicate rows that were not ingested.",
          "type" : "integer",
          "format" : "int64"
        },
        "updated" : {
          "description" : "The total count of rows updated for this feed during the job.",
          "type" : "integer",
          "format" : "int64"
        },
        "started_at" : {
          "description" : "The date and time at which a job started.",
          "type" : "string",
          "format" : "date-time"
        },
        "state" : {
          "description" : "The current state of the job.",
          "type" : "string"
        },
        "ended_at" : {
          "description" : "The date and time at which a job ended.",
          "type" : "string",
          "format" : "date-time"
        },
        "files" : {
          "description" : "Array of IngestFileDetails",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/IngestFileDetails"
          }
        },
        "inserted" : {
          "description" : "The total count of records added to this feed.",
          "type" : "integer",
          "format" : "int64"
        },
        "table_name" : {
          "description" : "The name of the updated table.",
          "type" : "string"
        },
        "job_id" : {
          "description" : "The ingest job identifier.",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "errors", "feed_id", "read", "rejected", "updated", "started_at", "state", "ended_at", "files", "inserted", "table_name", "job_id" ]
    },
    "IngestFileDetails" : {
      "description" : "Details on an ingest job for a single file",
      "example" : {
        "file_id" : "cb-20240618-71992-SF3Uz/part0.avro",
        "name" : "part0.avro",
        "read" : 1000,
        "errors" : 200
      },
      "type" : "object",
      "properties" : {
        "file_id" : {
          "description" : "The identifier for the file",
          "type" : "string"
        },
        "read" : {
          "description" : "The total count of records processed in this file",
          "type" : "integer",
          "format" : "int64"
        },
        "name" : {
          "description" : "The human readable identifier for the file",
          "type" : "string"
        },
        "errors" : {
          "description" : "The number of rows with an ingest error. For example, when Amperity cannot match a field value to the expected data type.",
          "type" : "integer",
          "format" : "int64"
        }
      },
      "additionalProperties" : false,
      "required" : [ "file_id", "read", "errors" ]
    },
    "IngestJobDetails" : {
      "description" : "Ingest job details",
      "example" : {
        "id" : "isj-1f73r9u2",
        "tables" : [ {
          "errors" : 200,
          "feed_id" : "df-5L6d1veh",
          "read" : 1000,
          "rejected" : 200,
          "updated" : 200,
          "started_at" : "2024-06-01T04:02:54.433Z",
          "state" : "succeeded",
          "ended_at" : "2024-06-01T04:02:57.433Z",
          "files" : [ {
            "file_id" : "cb-20240618-71992-SF3Uz/part0.avro",
            "name" : "part0.avro",
            "read" : 1000,
            "errors" : 200
          } ],
          "inserted" : 400,
          "table_name" : "My table",
          "job_id" : "isj-1f73r9u2"
        } ],
        "workflow_id" : "wf-20240618-3423-b45"
      },
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "The Amperity internal identifier for the injest job.",
          "type" : "string"
        },
        "workflow_id" : {
          "description" : "The Amperity internal identifier for the workflow that ran this job.",
          "type" : "string"
        },
        "tables" : {
          "description" : "A summary of table details from this ingest job.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/IngestFeedDetails"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "id", "workflow_id", "tables" ]
    },
    "Segment" : {
      "description" : "A segment",
      "example" : {
        "id" : "mx-seg-21HCWon6Y",
        "name" : "Washington Purchasers"
      },
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "Segment id",
          "type" : "string"
        },
        "name" : {
          "description" : "Segment name",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "id", "name" ]
    },
    "SegmentListEnvelope" : {
      "description" : "Paginated list of Segments",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "Segment items on this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Segment"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    },
    "Task" : {
      "description" : "A task within a workflow",
      "example" : {
        "tenant" : "acme2-max",
        "timeout_ms" : 172800000,
        "workflow_id" : "wf-20240619-14418-6UhqSe",
        "run_id" : "orb-20240619-EDnCxzmhrLN",
        "task_definition_id" : "send/ct-2yrcnb2Hn/ptg-2XsDnXwEu/pd-2ycaK3gfh",
        "state" : "failed",
        "task_definition_type" : "campaign.send",
        "ended_at" : "2024-06-19T04:03:10.094Z",
        "label" : "Sending treatment customer_attribute_group to destination - S3",
        "id" : "wft-20240619-14574-6kyYdY",
        "state_changed_at" : "2024-06-19T04:03:10.094Z",
        "error" : {
          "attribution" : "customer",
          "data" : {
            "error_code" : "InvalidAccessKeyId",
            "id" : "s3",
            "request_id" : "Z74HDXNGJ7ZPMRVS",
            "retryable?" : false
          },
          "message" : "The credential does not provide access to the given resource. Pl\n                      ease update the credential's access or try another credential.",
          "type" : "amperity.plugin.error/invalid-credentials"
        },
        "created_at" : "2024-06-19T04:02:54.433Z"
      },
      "type" : "object",
      "properties" : {
        "tenant" : {
          "description" : "The unique identifier for the tenant.",
          "x-example" : "acme-sb",
          "type" : "string"
        },
        "timeout_ms" : {
          "description" : "The length of time in milliseconds after which to forcibly kill a running task instance",
          "type" : "number",
          "format" : "double"
        },
        "workflow_id" : {
          "description" : "Unique identifier for the workflow",
          "type" : "string"
        },
        "run_id" : {
          "description" : "Unique identifier for the task instance to support execution engines\n   that can't provide an external run id",
          "type" : "string"
        },
        "task_definition_id" : {
          "description" : "Identifier for a task definition",
          "type" : "string"
        },
        "state" : {
          "description" : "Current task instance state.",
          "type" : "string"
        },
        "task_definition_type" : {
          "description" : "A keyword for identify different task types",
          "type" : "string"
        },
        "ended_at" : {
          "description" : "Time the task reached a terminal state",
          "type" : "string",
          "format" : "date-time"
        },
        "execution_type" : {
          "description" : "The execution type for the workflow",
          "type" : "string"
        },
        "label" : {
          "description" : "Human-readable label for a task-instance",
          "type" : "string"
        },
        "id" : {
          "description" : "Unique identifier for the task instance",
          "type" : "string"
        },
        "state_changed_at" : {
          "description" : "Time the task instance most recently changed state",
          "type" : "string",
          "format" : "date-time"
        },
        "error" : {
          "$ref" : "#/definitions/WorkflowError"
        },
        "created_at" : {
          "description" : "Time the task instance was created",
          "type" : "string",
          "format" : "date-time"
        }
      },
      "additionalProperties" : false,
      "required" : [ "tenant", "workflow_id", "task_definition_id", "state", "task_definition_type", "label", "id", "created_at" ]
    },
    "Workflow" : {
      "description" : "Represenation of a workflow",
      "example" : {
        "created_at" : "2024-06-19T04:00:18.764Z",
        "ended_at" : "2024-06-19T04:03:10.119Z",
        "error" : {
          "attribution" : "customer",
          "data" : {
            "error_code" : "InvalidAccessKeyId",
            "id" : "s3",
            "request_id" : "Z47DXHNGJ7ZPMRVS",
            "retryable?" : false
          },
          "message" : "The credential does not provide access to the given resource. Please update \n                      the credential's access or try another credential.",
          "type" : "amperity.plugin.error/invalid-credentials"
        },
        "id" : "wf-20240619-14418-6UhqSe",
        "name" : "Customer Attribute Daily",
        "state" : "failed",
        "tenant" : "acme2-max",
        "type" : "campaign.send"
      },
      "type" : "object",
      "properties" : {
        "tenant" : {
          "description" : "The unique identifier for the tenant.",
          "x-example" : "acme-sb",
          "type" : "string"
        },
        "warn_after_ms" : {
          "description" : "The time in milliseconds we should send a running long duration warning",
          "type" : "number",
          "format" : "double"
        },
        "principal_name" : {
          "description" : "Human-readable name for who or what created the workflow",
          "type" : "string"
        },
        "launched_version" : {
          "description" : "The ent version that was launched with the workflow",
          "type" : "string"
        },
        "name" : {
          "description" : "Human-readable identifier for the workflow",
          "type" : "string"
        },
        "principal_email" : {
          "description" : "Email address for who or what created the workflow",
          "type" : "string"
        },
        "principal_id" : {
          "description" : "Principal id for who or what created the workflow",
          "type" : "string"
        },
        "task_instances" : {
          "description" : "The list of tasks on the workflow.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Task"
          }
        },
        "type" : {
          "description" : "Keyword identifying the type of workflow",
          "type" : "string"
        },
        "state" : {
          "description" : "Current workflow state.",
          "type" : "string"
        },
        "current_version" : {
          "description" : "The current ent version associated with the workflow",
          "type" : "string"
        },
        "ended_at" : {
          "description" : "Time the workflow reached a terminal state",
          "type" : "string",
          "format" : "date-time"
        },
        "id" : {
          "description" : "Unique identifier for the workflow",
          "type" : "string"
        },
        "error" : {
          "$ref" : "#/definitions/WorkflowError"
        },
        "created_at" : {
          "description" : "Time the workflow was created",
          "type" : "string",
          "format" : "date-time"
        }
      },
      "additionalProperties" : false,
      "required" : [ "tenant", "type", "state", "id", "created_at" ]
    },
    "WorkflowError" : {
      "description" : "An error on the workflow. Populated only for error states.",
      "type" : "object",
      "properties" : {
        "type" : {
          "description" : "The type of workflow error.",
          "type" : "string"
        },
        "message" : {
          "description" : "The error message.",
          "type" : "string"
        },
        "data" : {
          "$ref" : "#/definitions/WorkflowErrorData"
        },
        "attribution" : {
          "description" : "The underlying cause of the error, either customer or platform.",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "type", "message" ]
    },
    "WorkflowErrorData" : {
      "description" : "Any additional data associated with this error.",
      "type" : "object",
      "additionalProperties" : { }
    },
    "WorkflowListEnvelope" : {
      "description" : "A paginated list of workflows.",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "Workflow items in this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Workflow"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    }
  },
  "produces" : [ "application/json" ],
  "paths" : {
    "/audit-events" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "happened_from",
          "description" : "The start date (inclusive) that defines the beginning of the time range for which audit events will be returned. The date should be in ISO-8601 format and in UTC.",
          "required" : false,
          "x-example" : "2023-01-03T11:11:11Z",
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "happened_to",
          "description" : "The end date (exclusive) that defines the end of the time range for which audit events will be returned. The date should be in ISO-8601 format and in UTC.",
          "required" : false,
          "x-example" : "2023-01-03T22:22:22Z",
          "type" : "string",
          "format" : "date-time"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of audit events",
            "schema" : {
              "$ref" : "#/definitions/AuditEventListEnvelope"
            }
          }
        },
        "description" : "Use the Audit Events endpoint to return a log of user activity that occurred within your tenant. When requesting events for a production tenant, all events (including events from sandboxes created for that tenant) are included in the response. When requesting events from a sandbox, only events from that sandbox are included in the response.",
        "summary" : "List audit events",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Audit events" ],
        "operationId" : "list-events"
      }
    },
    "/campaigns" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "destination_data_template_id",
          "description" : "Use this parameter to restrict the list of campaigns that are returned to only campaigns that are configured to use specific data template.",
          "required" : false,
          "x-example" : "ct-2QLLqXBEq",
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of campaigns",
            "schema" : {
              "$ref" : "#/definitions/CampaignListEnvelope"
            }
          }
        },
        "description" : "Use the Campaigns endpoint to return a list of campaigns from your tenant. You may restrict the list of campaigns to those associated with a specific data template.",
        "summary" : "List campaigns",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Campaigns" ],
        "operationId" : "list-campaign"
      }
    },
    "/segments" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of segments",
            "schema" : {
              "$ref" : "#/definitions/SegmentListEnvelope"
            }
          }
        },
        "description" : "Use the Segments endpoint to return a list of segments from your tenant.",
        "summary" : "List segments",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Segments" ],
        "operationId" : "list-segment"
      }
    },
    "/ingest/jobs/{job-id}" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "path",
          "name" : "job-id",
          "description" : "The id of the ingest job",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "A summary of records, files, and feeds ingested in this job",
            "schema" : {
              "$ref" : "#/definitions/IngestJobDetails"
            }
          }
        },
        "summary" : "Ingest job details",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Ingest" ]
      }
    },
    "/workflow/runs" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "type",
          "description" : "Return workflows that match the specified workflow type.",
          "required" : false,
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "state",
          "description" : "Return workflows that match the specified workflow state.",
          "required" : false,
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "ended_from",
          "description" : "A timestamp that defines the start (inclusive) of the time window in which workflows stopped running. Must be in ISO-8061 format and in UTC. Only workflows with an \"ended_at\" value that falls within the \"ended_from\"-\"ended_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "created_from",
          "description" : "A timestamp that defines the start (inclusive) of the time window in which workflows started to run. Must be in ISO-8061 format and in UTC. Only workflows with a \"created_at\" value that falls within the \"created_from\"-\"created_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "ended_to",
          "description" : "A timestamp that defines the end (exclusive) of the time window in which workflows stopped running. Must be in ISO-8061 format and in UTC. Only workflows with an \"ended_at\" value that falls within the \"ended_from\"-\"ended_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "created_to",
          "description" : "A timestamp that defines the end (exclusive) of the time window in which workflows started to run. Must be in ISO-8061 format and in UTC. Only workflows with a \"created_at\" value that falls within the \"created_from\"-\"created_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of workflows",
            "schema" : {
              "$ref" : "#/definitions/WorkflowListEnvelope"
            }
          }
        },
        "description" : "Return a list of workflows that exist within the date ranges defined in the request.",
        "summary" : "List workflows",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Workflow" ]
      }
    },
    "/workflow/runs/{workflow-id}" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "view",
          "description" : "Set to \"overview\" to return only \"created_at\", \"ended_at\", \"id\", \"name\", \"state\", \"tenant\", and \"type\". Set to \"verbose\" to return all response parameters, including for any tasks that were started by the workflow.",
          "required" : false,
          "type" : "string"
        }, {
          "in" : "path",
          "name" : "workflow-id",
          "description" : "The workflow ID.",
          "required" : true,
          "x-example" : "id",
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "Workflow details",
            "schema" : {
              "$ref" : "#/definitions/Workflow"
            }
          }
        },
        "description" : "Return details for a specific workflow.",
        "summary" : "Get workflow details",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Workflow" ]
      }
    },
    "/workflow/runs/{workflow-id}/stop" : {
      "post" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "path",
          "name" : "workflow-id",
          "description" : "The workflow ID.",
          "required" : true,
          "x-example" : "id",
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "503" : {
            "description" : "Service Unavailable",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "Workflow stopped",
            "schema" : {
              "$ref" : "#/definitions/Workflow"
            }
          }
        },
        "description" : "Stop a workflow.",
        "summary" : "Stop a workflow",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Workflow" ]
      }
    }
  },
  "consumes" : [ "application/json" ],
  "host" : "app.amperity.com",
  "info" : {
    "title" : "Amperity API",
    "version" : "2024-04-01",
    "description" : "# Amperity API Overview\n\nThe Amperity API enables programmatic access to your Amperity tenant\nthrough a collection of RESTful endpoints that support API-first use\ncases for integrations, applications, and custom workflows. Use Amperity\nAPI endpoints to streamline workflows, enhance marketing strategies, and\nunlock the value of your brand\\'s customer data.\n\n# Versions\n\nAmperity APIs evolve and change over time. Amperity versions API\nendpoints to help your brand track changes to the Amperity API and to\noffer support to developers as these endpoints evolve.\n\nYour team of developers can track improvements to the Amperity API from\nthe [changelog](https://docs.amperity.com/api/changelog.html). Monitor\nthe changelog to know when new versions are available and/or when\nexisting versions are updated or planned for deprecation.\n\n## Breaking changes\n\nA breaking change occurs when functionality within an API is modified in\na way that causes integrations or applications to function abnormally or\nto stop working.\n\nA breaking change often requires a third-party developer to make changes\nto their existing integrations or applications to maintain functionality\nwith an API.\n\nExamples of breaking changes include, but are not limited to:\n\n-   Removing an endpoint\n-   Renaming a URL, request or response field, HTTP header, or query\n    parameter\n-   Adding a required request field, HTTP header, or query parameter\n-   Requiring a request field, HTTP header, or query parameter that was\n    previously optional\n-   Removing a request or response field, HTTP header, or query\n    parameter\n-   Modifying a data type or enumeration value\n-   Adding pagination to a resource collection response\n\n## Non-breaking changes\n\nA non-breaking change does not cause integrations or applications to\nfunction abnormally or to stop working.\n\nA non-breaking change should not require a third-party developer to do\nany migration work to maintain existing functionality.\n\nExamples of non-breaking changes include, but are not limited to:\n\n-   Adding an endpoint\n-   Adding a request or response field, HTTP header, or query parameter\n-   Adding an enumeration value\n\n## Version identifiers\n\nA version identifier is a date string that must be included with each\nrequest made to an API endpoint. All endpoints are versioned together.\nThis provides consistency across all endpoints and ensures\ninteroperability. A version identifier is updated only when breaking\nchanges occur.\n\nFor example:\n\n    curl -request GET \\\n         -url \"https://{tenant-id}.amperity.com/api/{endpoint}/\" \\\n         -H \"Authorization: Bearer ${access-token}\" \\\n         -H \"Amperity-Tenant: {tenant-id}\" \\\n         -H \"Content-Type: application/json\" \\\n         -H \"api-version: {version}\"\n\n## Supported versions\n\nNew versions of the Amperity API are released periodically. Each version\nof an endpoint will be supported for at least 1 year.\n\nCurrent versions:\n\n-   **2024-04-01** The current version of the Amperity API.\n\n## Unstable versions\n\nDuring development, Amperity may release APIs for testing using the\n**unstable** version identifier. Unstable versions contain features that\nare still in progress and may not be backward compatible.\n\nThere are no guarantees around customer support, notification of\nchanges, breaking changes, or availability of unstable versions.\n\n## Deprecated versions\n\nAt least 6 months notice will be given before any supported version is\nmarked as unsupported. API calls that are made to an endpoint using a\nversion identifier that is no longer supported will return a 400\nresponse.\n\nAmperity APIs evolve and change over time. To warn developers of\nupcoming deprecations Amperity uses the following headers:\n\n-   [Deprecation\n    Header](https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-deprecation-header).\n    When **true** a deprecation will occur at the date indicated in the\n    header.\n-   [Sunset Header](https://datatracker.ietf.org/doc/html/rfc8594). When\n    **true** a deprecated feature will stop working and return a 4xx\n    response at the date indicated in the header.\n\nDeprecation and Sunset headers will be added at least 6 months prior to\na deprecation. A deprecation date will be at least 3 months prior to a\nsunset date. For example:\n\n    Deprecation: Tue, 1 Sep 2024 23:59:59 GMT\n    Sunset: Wed, 1 Dec 2024 23:59:59 GMT\n\nDeprecation and Sunset headers are informational. Amperity recommends\nbuilding alerts to monitor for these headers to ensure that your\napplications and workflows can be migrated.\n\n# Authentication\n\nAll requests that are made to Amperity API endpoints must be\nauthenticated by access tokens that are signed by Amperity-managed API\nkeys.\n\n## API keys\n\nAmperity API keys are synthetic identities that are bound to your tenant\nand enable programmatic access to Amperity. Your API key is configured\nwithin Amperity from the **Settings** page, **Security** tab.\n\n## Access tokens\n\nAccess to the Amperity API requires using JWT access tokens that are\nsigned by Amperity-managed API keys. Access tokens are generated against\nAmperity API keys within Amperity from the **Settings** page,\n**Security** tab.\n\n# Base URL\n\nAll requests made to Amperity API endpoints should be directed to the\nfollowing base URL:\n\n    https://{tenant-id}.amperity.com/api\n\nYou can find the tenant ID from the Amperity user interface. From the\n**Users and Activity** page, select the **Actions** menu for an API key,\nand then click **Copy tenant ID**.\n\nFor example, if the tenant ID is **acme** the base URL would be\n\n    https://acme.amperity.com/api\n\n# Requests\n\nRequests made to Amperity API endpoints require the following headers:\n\n-   **Authorization** Required. The bearer authentication header. This\n    should be the access token for your tenant\\'s API key.\n-   **Amperity-Tenant** Required. The ID for the tenant to which the\n    request will be sent. You can find the tenant ID in the base URL for\n    your tenant.\n-   **api-version** Required. A supported version of the Amperity API.\n    For example: **2024-04-01**.\n\nIn addition to all required headers, you must specify the HTTP method,\nand base URL. For example:\n\n    curl -request GET \\\n         -url \"https://{tenant-id}.amperity.com/api/{endpoint}/\" \\\n         -H \"Authorization: Bearer ${access-token}\" \\\n         -H \"Amperity-Tenant: {tenant-id}\" \\\n         -H \"api-version: {version}\"\n\nMost endpoints provide a set of endpoint-specific properties that may be\nincluded within the URL header.\n\n# Responses\n\nThe Amperity API responds in JSON format. Each response includes\nrelevant HTTP status codes that indicate the success or failure of the\nrequest. The individual properties in a response will vary by endpoint;\nall endpoints that support the GET HTTP method will return lists using\npagination.\n\n# Pagination\n\nAmperity uses cursor-based pagination to return pages of data for large\nlists. A paginated endpoint returns responses with a list of results\n*and* a **next_token** parameter when another page is available in the\nreturned dataset. You have reached the last page in the results set when\nthe **next_token** parameter is not returned.\n\n## Pagination in requests\n\nOmit the **next_token** property to return the first page. Use the\ncursor value for **next_token** that was returned in a response to view\nthe next page of results. The possible values for **next_token** are\nreturned within the **200** response. **next_token** cannot be set to\n**NULL**.\n\n## Pagination in responses\n\nA response will include the value of the next page as the value of the\n**next_token** parameter. You may use this value in a subsequent request\nto return the next page of results. When the value for **next_token** is\nempty, the last page in the results set has been returned.\n\n# Rate limits\n\nA rate limit is the number of requests that may be made to the Amperity\nAPI in a given time period.\n\nThe Amperity API supports requests to endpoints that do not exceed a\nrate of 10 requests per second. Response times will vary by endpoint and\nthe complexity of data that is returned by the response. Some requests\nmay take seconds to return.\n\nRequests to the Amperity API that exceed 10 requests per second may\nreturn an error response with an HTTP 429 status code.\n",
    "contact" : {
      "name" : "Amperity Support",
      "url" : "https://docs.amperity.com/",
      "email" : "support@amperity.com"
    },
    "x-logo" : {
      "url" : "_static/logo-api.png",
      "backgroundColor" : "#000",
      "altText" : "Amperity API Docs"
    }
  },
  "swagger" : "2.0",
  "basePath" : "/api"
}
